{% extends 'base.html' %}
{% load bootstrap4 %}

{% block content %}
<div class="community-container">
    <div class="community-navbar col-8"> <!--확인차 넣어둔 커뮤니티 navbar-->
        <span class="col-3"><a href="{%url 'community:notice'%}" class="text-dark">공지사항 </a></span>
        <span class="col-3"><a href="{%url 'community:magazine'%}" class="text-dark">매거진 </a></span>
        <span class="col-3"><a href="{%url 'community:board'%}" class="text-dark">자유게시판 </a></span>
    </div>
    <!--------------------------------------------------------------------->
    <div class="community-board col-8 mb-4">
        <div class="board-header d-flex justify-content-between pb-3">
            <div class="col-4 p-0">
                <div class="header-title">자유게시판</div>
                <div class="header-count">1,000개의 글</div>
            </div>
            <form class="d-flex col-4 h-75 p-0 align-self-end" method="GET" action="{% url 'community:search' %}">
                {% csrf_token %}
                <input type='text' name='search_key' class="" value="{{ search_key }}" placeholder='Search' />
                <input type='submit' class="" value="Search" />
            </form>
        </div>
        <div class="board-content">
            <div class="board-title d-flex">
                <p class="col-6 align-self-center">제목</p>
                <div class="d-flex col-6 p-0">
                    <p class="col-3 align-self-center">작성자</p>
                    <p class="col-3 align-self-center">작성일</p>
                    <p class="col-3 align-self-center">좋아요</p>
                    <p class="col-3 align-self-center">조회수</p>
                </div>
            </div>
            {% for board in page_obj.object_list %}
            <div class="board-title d-flex" style="border-bottom: 1px solid #EEEEEE;">
                <p class="col-6 align-self-center"><a href="{%url 'community:board_detail' board.id%}" class="text-dark">{{ board.title }}</a></p>
                <div class="d-flex col-6 p-0">
                    <p class="col-3 align-self-center">{{ board.user }} </p>
                    <p class="col-3 align-self-center">{{ board.created_at | date:"Y-m-d" }}</p>
                    <p class="col-3 align-self-center">{{ board.like.count }}</p>
                    <p class="col-3 align-self-center">{{ board.hits }}</p>
                </div>
            </div>
            {%endfor%}
        </div>
        <div class="pt-4"style="text-align: end;">
            <a href="{%url 'community:board_create' %}" class="board-button text-light">글작성</a>
        </div>
        <div class="board-paginator">
            {% if page_obj.has_previous %}
                <a href="?page=1" class="text-dark">처음으로</a>
                <a href="?page={{ page_obj.previous_page_number }}" class="text-dark">&lt&lt</a>
            {% endif %}
            
            <span class="current">
                 {{ page_obj.number }} / {{ page_obj.paginator.num_pages }}
            </span>
            <!-- {% for page_num in boards.paginator.page_range %}
                <a href="?page=1">{{page_num}}</a>
            {% endfor %} -->
            
            {% if page_obj.has_next %}
                <a href="?page={{ page_obj.next_page_number }}" class="text-dark">&gt&gt</a>
                <a href="?page={{ page_obj.paginator.num_pages }}" class="text-dark">맨뒤로</a>
            {% endif %}
        </div>
    </div>

</div>

{% endblock %}