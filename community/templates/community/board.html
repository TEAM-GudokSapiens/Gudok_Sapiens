{% extends 'base.html' %}
{% load bootstrap4 %}

{% block content %}
<div class="community-container">
    <div class="community-navbar col-8"> <!--확인차 넣어둔 커뮤니티 navbar-->
        <span class="col-3"><a href="{%url 'community:notice'%}">공지사항 </a></span>
        <span class="col-3"><a href="{%url 'community:magazine'%}">매거진 </a></span>
        <span class="col-3"><a href="{%url 'community:board'%}">자유게시판 </a></span>
    </div>
    <!--------------------------------------------------------------------->
    <div class="community-board col-8">
        <div class="board-header d-flex justify-content-between pb-3">
            <div class="col-4 p-0">
                <div class="header-title">자유게시판</div>
                <div class="header-count">1000개의 글</div>
            </div>
            <form class="d-flex col-4 h-75 p-0" method="GET" action="{% url 'community:search' %}">
                {% csrf_token %}
                <input type='text' name='search_key' class="" value="{{ search_key }}" placeholder='Search' />
                <input type='submit' class="" value="Search" />
            </form>
        </div>
        <div class="board-content">
            <div class="board-title d-flex">
                <p class="col-6">제목</p>
                <div class="d-flex col-6">
                    <p class="col-3">작성자</p>
                    <p class="col-3">작성일</p>
                    <p class="col-3">좋아요</p>
                    <p class="col-3">조회수</p>
                </div>
            </div>
            {% for board in page_obj.object_list %}
            <div class="board-title d-flex">
                <p class="col-6"><a href="{%url 'community:board_detail' board.id%}" >{{ board.title }}</a></p>
                <div class="d-flex col-6">
                    <p class="">{{ board.user }} </p>
                    <p class="">{{ board.created_at | date:"Y-m-d" }}</p>
                    <p class="">{{ board.like.count }}</p>
                    <p class="">{{ board.hits }}</p>
                </div>
                <hr>
            </div>
            {%endfor%}
        </div>
    </div>

    <a href="{%url 'community:board_create' %}" >글작성</a>
    <br>

    {% if page_obj.has_previous %}
        <a href="?page=1">처음으로</a>
        <a href="?page={{ page_obj.previous_page_number }}">이전으로</a>
    {% endif %}
    
    <span class="current">
         {{ page_obj.number }} / {{ page_obj.paginator.num_pages }}
    </span>
    
    {% if page_obj.has_next %}
        <a href="?page={{ page_obj.next_page_number }}">다음으로</a>
        <a href="?page={{ page_obj.paginator.num_pages }}">맨뒤로</a>
    {% endif %}
</div>

{% endblock %}