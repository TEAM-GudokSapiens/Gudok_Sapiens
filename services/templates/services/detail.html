{% extends "base.html" %}
{% block content %}
<div class="d-flex justify-content-center">
    <div class="detail-container mt-3">
        <div class="img-container d-flex justify-content-around">
            <div class="main-img-container">
                <img src="{{ service.img1.url }}" class="main-img"/>
                
                <!-- carousel -->
                <div id="carouselControls" class="carousel slide" data-bs-ride="carousel">
                    <div class="carousel-inner">
                      <div class="carousel-item active">
                        <img src="{{ service.img1.url }}"/>
                      </div>
                      <div class="carousel-item">
                        <img src="{{ service.img2.url }}"/>
                      </div>
                      <div class="carousel-item">
                        <img src="{{ service.img3.url }}"/>
                      </div>
                      <div class="carousel-item">
                        <img src="{{ service.img4.url }}"/>
                      </div>
                    </div>
                    <button class="carousel-control-prev btn" data-bs-target="#carouselControls" data-bs-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Previous</span>
                      </button>
                      <button class="carousel-control-next btn" data-bs-target="#carouselControls" data-bs-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Next</span>
                      </button>
                  </div>
                <!-- carousel end -->

            </div>
            <div class="img-sub-container d-flex flex-column">
                <div>
                    <img src="{{ service.img2.url }}" class="second-img" />
                </div>
                <div class="sub-img d-flex justify-content-around">
                    <div>
                        <img src="{{ service.img3.url }}" />
                    </div>
                    <div>
                        <img src="{{ service.img4.url }}" />
                    </div>
                </div>
            </div>
        </div>
        <div class="service-container">
                <div class="service-box pl-4">
                    <div class="service-name">{{service.name}}</div>
                    <div class="service-intro">{{service.intro}}</div>
                    <div class="service-content">{{service.content}}</div>
                </div>
                <!-- tab -->
                <ul class="nav nav-pills mb-3 d-flex justify-content-around" id="pills-tab" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link active btn" id="pills-home-tab" data-bs-toggle="pill" data-bs-target="#pills-home" role="tab" aria-controls="pills-home" aria-selected="true">Í∞ÄÍ≤©
                        </button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link btn" id="pills-profile-tab" data-bs-toggle="pill" data-bs-target="#pills-profile" role="tab" aria-controls="pills-profile" aria-selected="false">Î¶¨Î∑∞</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link btn" id="pills-contact-tab" data-bs-toggle="pill" data-bs-target="#pills-contact" role="tab" aria-controls="pills-contact" aria-selected="false">Ï†ïÎ≥¥</button>
                    </li>
                </ul>
                <div class="tab-content" id="pills-tabContent">
                    <div class="tab-pane fade show active" id="pills-home" role="tabpanel" aria-labelledby="pills-home-tab">
                        <div class="price-tab">
                            <div class="tab-title">ÏÑúÎπÑÏä§ ÏµúÏ†ÄÍ∞Ä</div>
                            <p class="tab-content">{{service.price}}Ïõê (ÌïúÎã¨ Í∏∞Ï§Ä)</p>
                        </div>
                    </div>
                    <div class="tab-pane fade" id="pills-profile" role="tabpanel" aria-labelledby="pills-profile-tab">
                        <div class="review-tab">
                            <div class="tab-title d-inline">Î¶¨Î∑∞</div>
                            <div class="review-count d-inline">{{service.review_set.all.count}}Í∞ú</div>

                            {% for review in service.review_set.all %}
                            <div class="review-content">
                                <div class="title-block mb-3">
                                    <div class="d-inline">{{review.user}}üå±</div>
                                    <div class="review-date d-inline">{{review.updated_at}}</div>
                                </div>
                                <div class="content-block">
                                    {% if review.photo %}
                                    <img src="{{ review.photo.url }}" class="review-img" />
                                    {% endif %}
                                    <p class="d-inline">{{review.title}}</p>
                                    <p class="d-inline">{{review.content}}</p>
                                </div>
                            </div>
                            <hr>
                            {% endfor %}
                            <!-- <form class="container">
                                <div class="form-group">
                                  <label for="title">Ï†úÎ™©</label>
                                  <input name="title" type="text" class="form-control review-title"  placeholder="Ï†úÎ™©ÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî">
                                </div>
                                <div class="form-group">
                                  <label for="content">ÎÇ¥Ïö©</label>
                                  <textarea name="content" class="form-control review-content" placeholder="ÎÇ¥Ïö©ÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî" rows="3"></textarea>
                                </div>
                                <div class="form-group">
                                    <label for="content">Î≥ÑÏ†ê</label>
                                    <input name="star" type="text" class="form-control review-stars" placeholder="Ï†úÎ™©ÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî">
                                  </div>
                                  <div class="form-group">
                                    <label for="content">ÏÇ¨Ïö© Í∏∞Ìïú</label>
                                    <input name="period" type="text" class="form-control review-period" placeholder="Ï†úÎ™©ÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî">
                                </div>
                                <button type="button" class="btn btn-primary" id="article-create-btn" onclick="onClickSubmit(
                                    {{ service.id }})">Ï†úÏ∂ú</button>
                              </form> -->
                            <div>
                                <input class="addReview" type="text" placeholder="ÎåìÍ∏Ä Îã¨Í∏∞...">
                                <button type="button" onclick="onClickSubmit(
                                    {{ service.id }})">Ï†úÏ∂ú</button>
                            </div>
                        </div>
                    </div>
                    <div class="tab-pane fade" id="pills-contact" role="tabpanel" aria-labelledby="pills-contact-tab">
                        <div class="info-tab">
                            <div class="tab-title">ÌöåÏÇ¨ Ï†ïÎ≥¥</div>
                            <p class="tab-content">ÌöåÏÇ¨Î™Ö: XXX</p>
                            <p class="tab-content">ÌöåÏÇ¨ Ï£ºÏÜå: XXX</p>
                            <p class="tab-content">Í≥†Í∞ùÏÑºÌÑ∞: XXX</p>
                        </div>
                    </div>
                </div>

                <!-- tabend -->

        </div>
        <div class="fixing-box">
            <div class="keywords">
                <div>#ÏùåÏãù</div>
                <div>#Ïû¨ÎØ∏</div>
                <div>#ÏòÅÌôî</div>
                <div>#ÌÇ§ÏõåÎìú</div>
            </div>
            <div class="fix-name">{{service.name}}</div>
            <div class="fix-intro">{{service.intro}}</div>
            <div class="fix-stars">‚≠êÔ∏è‚≠êÔ∏è‚≠êÔ∏è‚≠êÔ∏è‚≠êÔ∏è</div>
            <div class="fix-link"><a href="">Ï∞ú</a> /
                <a href="">Í≥µÏú†</a>
            </div>
        </div>
    </div>
</div>


<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script>
    const onClickSubmit=async(service_id)=>{  
        const url='/reviews/submit_ajax/';
        const title='title'
        const content='content'
        const stars=6
        const period=5
        // const title=document.querySelector(`.review-title`).value
        // const content=document.querySelector(`.review-content`).value
        // const stars=document.querySelector(`.review-stars`).value
        // const period=document.querySelector(`.review-period`).value
        const {data}=await axios.post(url,{
            service_id ,title, content, stars, period
        });
        submitHandleResponse(data.service_id, data.review_id, data.content);
    };
    const submitHandleResponse=(service_id, review_id, content)=>{
        console.log('submitHandleResponse')
    };
</script>
{% endblock %}