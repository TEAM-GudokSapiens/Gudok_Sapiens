{% extends 'base.html' %}
{% load bootstrap4 %}

{% block content %}
<div class="forms text-center col-lg-3 col-md-4 col-sm-6 col-10">
    <div>
        <h2 style="text-align:center;">비밀번호 변경</h2>
    </div>
    
    <form method="POST" novalidate>
        {% csrf_token %}

        <div> <!--기존 비밀번호-->
            기존 비밀번호
            {{ password_change_form.old_password }}

            <script type="text/javascript">
                if (document.getElementsByName('old_password')[0].value != '') {
                    document.getElementsByName('label_old_password')[0].setAttribute('class', 'active');
                }
            </script>

            {% if password_change_form.old_password.errors %}
                <script type="text/javascript">
                    document.getElementsByName('old_password')[0].setAttribute('class', 'form-control is-invalid')
                </script>
                {% for error in password_change_form.old_password.errors %}
                
                <div class="invalid-feedback">
                    {{ error }}
                </div>
                {% endfor %}
            {% endif %}
        </div>
        <div> <!--새 비밀번호-->
            새 비밀번호
            {{ password_change_form.new_password1 }}

            <script type="text/javascript">
                if (document.getElementsByName('new_password1')[0].value != '') {
                    document.getElementsByName('label_new_password1')[0].setAttribute('class', 'active');
                }
            </script>

            {% if password_change_form.new_password1.errors %}
                <script type="text/javascript">
                    document.getElementsByName('new_password1')[0].setAttribute('class', 'form-control is-invalid')
                </script>
                {% for error in password_change_form.new_password1.errors %}
                <div class="invalid-feedback">
                    {{ error }}
                </div>
                {% endfor %}
            {% endif %}
        </div>
        <div> <!--새 비밀번호(확인)-->
            새 비밀번호(확인)
            {{ password_change_form.new_password2 }}

            <script type="text/javascript">
                if (document.getElementsByName('new_password2')[0].value != '') {
                    document.getElementsByName('label_new_password2')[0].setAttribute('class', 'active');
                }
            </script>

            {% if password_change_form.new_password2.errors %}
                <script type="text/javascript">
                    document.getElementsByName('new_password2')[0].setAttribute('class', 'form-control is-invalid')
                </script>
                {% for error in password_change_form.new_password2.errors %}
                <div style="white-space: nowrap;" class="invalid-feedback">
                    {{ error }}
                </div>
                {% endfor %}
            {% endif %}
            
        </div>

        <small>
            최소 8개의 숫자와 문자 또는 특수기호를 입력해주세요.
        </small>

    <div>
        <a href='/services/main/'>돌아가기</a>
        <button type="submit">변경하기</button>
    </div>
    </form>
</div>


{% endblock %}